<!DOCTYPE html>
<html lang="en">
<head>
  <title>The SYSTEM⚙️</title>
</head>

<body>
  <h1>The SYSTEM⚙️</h1>
  <!--
    Thi section specifies the table that will be used to display the leaderboard.
  -->
  <table>
    <tr>
      <th>Rank</th>
      <th>User</th>
      <th>Points</th>
    </tr>
    <tr>
      <td>1.</td>
      <td>David</td>
      <td>-10,000,000</td>
    </tr>
  </table>
  <br/>

  <!--
      This section contains the form to hit the `POST /points` API
  -->
  <form action="/points" method="post">
    Name: 
    <input type="text" name="user">
    <br/>
    Points:
    <input type="text" name="points">
    <br/>
    <input type="submit" value="Submit">  
  </form>

  <script>
    pointsTable = document.querySelector("table")

    fetch("/points")
      .then(response => response.json())
      .then(pointList => {
          pointList.forEach(user => {
              row = document.createElement("tr")
              userBox = document.createElement("td")
              userBox.innerHTML = user.user
              points = document.createElement("td")
              points.innerHTML = user.points
              rank = document.createElement("td")
              rank.innerHTML = user.rank

              row.appendChild(rank)
              row.appendChild(userBox)
              row.appendChild(points)
              pointsTable.appendChild(row)
          })
      })
  </script>
</body>
</html>